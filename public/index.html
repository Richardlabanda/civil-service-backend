<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Questions</title>
</head>
<body>
    <h2>Manage Questions</h2>

    <button id="addQuestionBtn">Add Question</button>
    
    <h3>Existing Questions</h3>
    
    <div id="questionsContainer"></div>

    <script>
        document.getElementById("addQuestionBtn").addEventListener("click", function() {
            const data = {
                text: "What is the capital of France?",
                category: "Geography",  
                option_a: "Paris",
                option_b: "London",
                option_c: "Berlin",
                option_d: "Madrid",
                correct_answer: "a"
            };

            
            fetch("http://127.0.0.1:8000/api/questions", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(json => {
                console.log("Question added successfully", json);
                alert("Question added successfully!");
                fetchQuestions(); 
            })
            .catch(error => {
                console.error("Error adding question", error);
                alert("Error adding question.");
            });
        });

        function fetchQuestions() {
            fetch("http://127.0.0.1:8000/api/questions", {
                method: "GET",
                headers: {
                    "Content-Type": "application/json"
                }
            })
            .then(response => response.json())
            .then(questions => {
                const questionsContainer = document.getElementById("questionsContainer");
                questionsContainer.innerHTML = ''; 

                questions.forEach(question => {
                    const questionElement = document.createElement('div');
                    questionElement.classList.add('question');
                    questionElement.innerHTML = `
                        <p><strong>Question:</strong> ${question.text}</p>
                        <p><strong>Category:</strong> ${question.category}</p>
                        <button onclick="deleteQuestion(${question.id})">Delete</button>
                    `;
                    questionsContainer.appendChild(questionElement);
                });
            })
            .catch(error => {
                console.error("Error fetching questions", error);
                alert("Error fetching questions.");
            });
        }

        function deleteQuestion(id) {
            fetch(`http://127.0.0.1:8000/api/questions/${id}`, {
                method: "DELETE",
                headers: {
                    "Content-Type": "application/json"
                }
            })
            .then(response => response.json())
            .then(json => {
                console.log("Question deleted successfully", json);
                alert("Question deleted successfully!");
                fetchQuestions(); 
            })
            .catch(error => {
                console.error("Error deleting question", error);
                alert("Error deleting question.");
            });
        }

        
        window.onload = function() {
            fetchQuestions();
        };
    </script>
</body>
</html>
